<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/public.css">
    <link rel="stylesheet" href="./css/reg.css">
    <link rel="stylesheet" href="./css/reset.css">
    <script src="./js/jquery-3.5.1.min.js"></script>
</head>

<body>
    <div class="wrap">
        <header class="header clear-fix">
            <div class="logonew"><img src="./img/logonew.png" alt=""></div>
            <ul class="clear-fix">
                <li class="h-shouye">
                    首页
                </li>
                <li class="h-kuwan">
                    酷玩
                </li>
                <li class="h-daogou">
                    导购
                </li>
                <li class="h-shiyong">
                    试用
                </li>
                <li class="h-baogao">
                    报告
                </li>
            </ul>
            </ul>
            <img src="./css/img/search.png" alt="" class="h-search">
            <button class="h-btn">注册</button>
            <button class="h1-btn">登录</button>
        </header>
    </div>
    <main class="main">
        <div class="m-reg">注册极果</div>
        <form action="">
            <div> <input type="text" class="phone" placeholder="请输入登录手机号"></div>
            <div> <input type="text" class="t-yanz" placeholder="请输入图片验证码"><img src="./img/imgCode.jpg" alt=""></div>
            <div>
                <input type="text" class="s-yanz" placeholder="请输入四位数验证码">
                <input class="btn" value="获取验证码" readonly></input>
            </div>
            <div> <input type="text" id="user" placeholder="请输入用户名"></div>
            <div> <input type="password" name="" id="pass" placeholder="请输入新密码"></div>
            <div> <input type="paasword" id="repass" placeholder="确认新密码"></div>
            <div class="submit">立即注册</div>
        </form>
    </main>
    <footer class="footer clear-fix">
        <div class="foot">
            <div class="f-icon"> <img src="./img/code.png" alt=""><img src="./img/logoImg.jpg" alt="">
                <div class="f-text">
                    <p>全球酷玩试用导购平台酷·新奇·好玩·品质</p>
                    <p>微信添加“jiguo”获取我们的服务。</p>
                </div>
            </div>
            <ul class="f-content">
                <li>
                    <p><a href=""> 免费试用</a></p>
                    <p> <a href="">
                    试用流程
                 </a></p>
                    <p> <a href="">
                    如何提高成功率
                    </a>
                    </p>
                </li>
                <li>
                    <p> <a href="">
                友情链接
                </a></p>
                    <p>
                        <a href="">智东西</a>
                        <a href="">WEIBUSI</a>
                    </p>
                    <p>
                        <a href="">搜狐IT</a>
                        <a href="">腾讯科技</a>
                    </p>
                    <p>
                        <a href="">搜狐数码</a>
                        <a href="">凤凰科技</a>
                    </p>
                    <p>
                        <a href="">凤凰数码</a>
                        <a href="">PConline</a>
                    </p>
                    <p>
                        <a href="">泡泡网</a>
                        <a href="">3W咖啡</a>
                    </p>
                    <p>
                        <a href="">
                            <a href=""></a>
                        </a>
                    </p>
                    <p>
                        <a href="">极客公园</a>
                        <a href="">易迅易启玩</a>
                    </p>
                    <p>
                        <a href="">果库</a>
                    </p>
                </li>
                <li>
                    <p>
                        <a href="">购买攻略</a>
                    </p>
                    <p>
                        <a href="">美亚海淘教程</a>
                    </p>
                    <p>
                        <a href="">日亚海淘教程</a>
                    </p>
                    <p>
                        <a href="">海淘转运攻略</a>
                    </p>
                    <p>
                        <a href="">kickstarter </a>
                        <a href="">众筹购买攻略</a>
                    </p>
                    <p>
                        <a href="">indiegogo</a>
                        <a href="">众筹购买攻略</a>
                    </p>
                </li>
                <li>
                    <p>
                        <a href="">厂商合作</a>
                    </p>
                    <p>
                        <a href="">关于极果</a>
                    </p>
                    <p>
                        <a href="">联系我们</a>
                    </p>
                    <p>
                        <a href="">商务合作：BD@jiguo.com</a>
                    </p>
                    <p>
                        <a href="">CEO邮箱：CEO@jiguo.com</a>
                    </p>
                </li>
            </ul>
            <div class="f-last">@2016 极果版权所有</div>
        </div>
    </footer>
    <script>
        $('.btn').on('click', function() {
            clearInterval(tiemer);
            var a = 60;
            var tiemer = setInterval(function() {
                a--;
                if (a == 0) {
                    clearInterval(tiemer);
                } else if (a < 60 && a > 5) {
                    $('.btn').attr('disabled', true);
                    $('.btn').val(a + '秒后，重新发送');
                } else if (a <= 5) {
                    $('.btn').attr('disabled', false);
                    $('.btn').val('重新发送验证码');
                }
            }, 1000);
        });
        $('.submit').on('click', function() {
            var reg = /^\d[0-9]{9}\d$/g;
            var reg1 = /^\w\w{2,}\w$/g;
            var reg2 = /^\w\w{4,}\w$/g
            if ($('.phone').val() == '' || reg.test($('.phone').val()) == false) {
                alert('请输入合法手机号');
                return false;
            }
            if ($('.t-yanz').val() != 'r2B7') {
                alert('请输入正确的验证码');
                return false;
            }
            if ($('.s-yanz').val() == '') {
                alert('请重新获取验证码');
                return false;
            }
            if ($('#user').val() == '' || reg1.test($('#user').val()) == false) {
                alert('请输入正确的用户名');
                return false;
            }
            if ($('#pass').val() == '' || reg2.test($('#pass').val()) == false) {
                alert('请输入正确的密码');
                return false;
            }
            if ($('#repass').val() != $('#pass').val()) {
                alert('两次的密码输入不一致');
                return false;
            }
            var phonenum = $('.phone').val();
            var codes = $('.t-yanz').val();
            var uname = $('#user').val();
            var pwd = $('#pass').val();
            localStorage.setItem('用户名', uname);
            localStorage.setItem('密码', pwd);
            $.ajax({
                url: 'http://192.168.1.64:3000/users/register',
                type: 'post',
                data: {
                    phone: phonenum,
                    code: codes,
                    username: uname,
                    password: pwd
                },
                dataType: 'json',
                success: function(res) {
                    console.log(res);
                    if (res.msg == '注册成功！' || res.msg == '用户名已存在') {
                        alert('您已注册成功即将自动为您跳转登录页面');
                        $(this).attr('disabled', false);
                        window.open('./网站首页.html')
                    }
                }
            })
        });
        $('.h-shouye').on('click', function() {
            window.open('./网站首页.html')
        });
        $('.h-kuwan').on('click', function() {
            window.open('./play/发现酷玩.html')
        });
        $('.h-daogou').on('click', function() {
            window.open('./guid/导购-最热.html')
        });
        $('.h-shiyong').on('click', function() {
            window.open('./use/试用--大众试用.html')
        });
        $('.h-baogao').on('click', function() {
            window.open('./report/报告--最新.html')
        });
    </script>
</body>

</html>